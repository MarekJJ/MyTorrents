angular.module("sfcShiftTemplates",["ui.router","datatables","datatables.bootstrap","dsrDataTables"]).config(["DefaultModuleStateProvider",function(e){e.initialize({entityName:"ShiftTemplate",templatesPath:"/Areas/WorkShifts/Scripts/ShiftTemplates/templates/",permissionRoot:"WorkShifts/ShiftTemplates/",previewPermission:"Access"})}]),angular.module("sfcShiftTemplates").factory("shiftTemplateRemoveService",["genericRemoveService","$rootScope",function(e,t){return{remove:function(t){return e("/WorkShifts/ShiftTemplates/Remove","shiftTemplates.removeConfirmationMessage").remove(t)}}}]),angular.module("sfcShiftTemplates").directive("uniqueShiftTemplateCodeValidator",["$q","$http","$state",function(e,t,i){return{restrict:"A",require:"ngModel",link:function(o,a,n,r){r.$asyncValidators.uniqueShiftTemplateCodeValidator=function(o){var a="edit"===i.current.name;if(a&&!n.numberSeriesId)return e.resolve();var r={numberSeriesId:n.numberSeriesId,numberSeriesName:o};return t.post("/WorkShifts/ShiftTemplates/IsShiftTemplateCodeUnique",r).then(function(t){return t.data===!0?e.resolve():e.reject()})}}}}]).controller("AddOrUpdateShiftTemplateController",["$scope","$state","$stateParams","$translate","$http","$q","toastrWrapper","minutesToFormattedTimeFilter","shiftTemplateRemoveService",function(e,t,i,o,a,n,r,s,l){function m(){return!!f.model.siteId}function d(){var e=i.id||"";a.post("/WorkShifts/ShiftTemplates/GetEdit/"+e).then(function(e){angular.extend(f.model,e.data.shiftTemplate),f.sites=e.data.sites,f.subtitle=e.data.shiftTemplate?e.data.shiftTemplate.code:o.instant("shiftTemplates.addNewShiftTemplate")})}var f=this;return f.model={},f.isEditMode="edit"===t.current.name,f.maxTimeValue=1439,f.getCodeValidationData=function(){return{ready:m(),data:{siteId:f.model.siteId,modelId:f.model.id}}},f.getTimeValidationData=function(e){function t(e){return{shiftCode:e.overlappingShiftCode,shiftStartTime:s(e.overlappingShiftStartTime),shiftEndTime:s(e.overlappingShiftEndTime)}}return{ready:m(),data:{siteId:f.model.siteId,modelId:f.model.id,isEndTime:e},callback:function(i){var o=t(i);e?f.endTimeOverlappedShiftMessageData=o:f.startTimeOverlappedShiftMessageData=o}}},f.onSiteChange=function(){e.$broadcast("event:site-changed")},f.save=function(){var e=angular.copy(f.model);return a.post("/WorkShifts/ShiftTemplates/AddOrUpdate",e).then(function(){r.showTranslatedSuccess("shiftTemplates.shiftTemplateSavedSuccessfully"),f.goToListView()})},f.remove=function(){l.remove(f.model.id).then(function(){f.goToListView()})},f.goToListView=function(){t.go("list")},f.isEditMode&&!i.id?void f.goToListView():void d()}]),angular.module("sfcShiftTemplates").controller("ShiftTemplateListController",["DTColumnBuilder","$translate","minutesToFormattedTimeFilter","shiftTemplateRemoveService",function(e,t,i,o){var a=this;a.options={tableDataUrl:"/WorkShifts/ShiftTemplates/GetList",columns:[e.newColumn("site").withTitle(t("common.site")),e.newColumn("code").withTitle(t("common.code")),e.newColumn("startTime").withTitle(t("common.startTime")).renderWith(function(e){return i(e)}),e.newColumn("endTime").withTitle(t("common.endTime")).renderWith(function(e){return i(e)})],permissions:{view:"WorkShifts/ShiftTemplates/Access",edit:"WorkShifts/ShiftTemplates/Edit",delete:"WorkShifts/ShiftTemplates/Delete",add:"WorkShifts/ShiftTemplates/Add"},removeItems:function(e){return o.remove(e)}}}]),angular.module("sfcShiftTemplates").controller("PreviewShiftTemplateController",["$state","$stateParams","$http","shiftTemplateRemoveService",function(e,t,i,o){var a=this;return a.model={},a.goToListView=function(){e.go("list")},a.goToEditView=function(){e.go("edit",{id:a.model.id})},a.remove=function(){o.remove(a.model.id).then(function(){a.goToListView()})},t.id?void i.post("/WorkShifts/ShiftTemplates/GetPreview/"+t.id).then(function(e){angular.extend(a.model,e.data),a.subtitle=a.model.code}):void a.goToListView()}]);
//# sourceMappingURL=shiftTemplates-Js.min.js.map
