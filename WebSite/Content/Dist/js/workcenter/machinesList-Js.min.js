angular.module("sfcMachinesList",["ui.router","datatables","datatables.bootstrap","dsrDataTables"]).config(["DefaultModuleStateProvider",function(e){e.initialize({entityName:"Machine",templatesPath:"/Areas/WorkCenters/StaticViews/Machines/",permissionRoot:"Machines/Machines/"})}]).run(["$rootScope","$translate",function(e,t){t("machine.machineList").then(function(t){e.title=t})}]),angular.module("sfcMachinesList").controller("AddOrUpdateMachineController",["$scope","$state","$stateParams","$http","$q","toastrWrapper",function(e,t,n,i,o,a){function r(){var e=n.id||"";i.post("/WorkCenters/Machines/GetEdit/"+e).then(function(e){var t=e.data.machine;angular.extend(s.model,t),s.sites=e.data.sites,s.departments=e.data.departments,s.workCenters=e.data.workCenters,s.activityModes=e.data.activityModes,s.availableMachineGroups=e.data.availableMachineGroups,t||(s.model.active=!0,s.model.slots=1,s.model.maxActivities=1)})}var s=this;return s.model={},s.isEditMode="edit"===t.current.name,s.save=function(){var e=angular.copy(s.model);return i.post("/WorkCenters/Machines/AddOrUpdate",e).then(function(){a.showTranslatedSuccess("machine.savedSuccessfully"),s.goToListView()})},s.goToListView=function(){t.go("list")},s.isEditMode&&!n.id?void s.goToListView():(s.onSiteChange=function(){if(s.model.departmentId=null,s.model.workCenterId=null,s.model.siteId)return i.post("/WorkCenters/Machines/GetDepartments",{siteId:s.model.siteId}).then(function(e){s.departments=e.data})},s.onDepartmentChange=function(){if(s.model.workCenterId=null,s.model.departmentId)return i.post("/WorkCenters/Machines/GetWorkCenters",{departmentId:s.model.departmentId}).then(function(e){s.workCenters=e.data})},s.onWorkCenterChange=function(){e.$broadcast("event:revalidate-workcenter-changed"),e.form.name.$setTouched()},void r())}]),angular.module("sfcMachinesList").controller("MachineListController",["DTColumnBuilder","$translate","$filter",function(e,t,n){var i=this;i.options={tableDataUrl:"/WorkCenters/Machines/GetList",columns:[e.newColumn("code").withTitle(t("common.code")),e.newColumn("name").withTitle(t("common.name")),e.newColumn("workCenter").withTitle(t("machine.workCenter")).renderWith(function(e,t,n){return'<a class="url-underline" target="_blank" href="/WorkCenters/WorkCenters/#/preview/'+n.workCenterID+'" >'+n.workCenter+"</a>"}),e.newColumn("department").withTitle(t("machine.department")),e.newColumn("site").withTitle(t("common.site")),e.newColumn("slots").withTitle(t("machine.slots")).notSortable(),e.newColumn("maxActivities").withTitle(t("machine.maxActivities")).notSortable(),e.newColumn("resourceGroup").withTitle(t("machine.resourceGroup")).notSortable().withClass("text-center").renderWith(function(e,t,n){return'<readonly-checkbox checked="'+e+'" />'}),e.newColumn("activityMode").withTitle(t("machine.activityMode")),e.newColumn("machineGroups").withTitle(t("machineGroup.machineGroups")).withClass("text-center").renderWith(function(e,t,n){var i="";return angular.forEach(e,function(e){i+="<div>"+e+"</div>"}),i}),e.newColumn("active").withTitle(t("common.active")).notSortable().withClass("text-center").renderWith(function(e,t,n){return'<readonly-checkbox checked="'+e+'" />'})],permissions:{view:"Machines/Machines/View",edit:"Machines/Machines/Edit",delete:"",add:"Machines/Machines/Add"}}}]),angular.module("sfcMachinesList").controller("PreviewMachineController",["$state","$stateParams","$http",function(e,t,n){var i=this;return i.model={},i.goToListView=function(){e.go("list")},i.goToEditView=function(){e.go("edit",{id:i.model.id})},t.id?void n.post("/WorkCenters/Machines/Get/"+t.id).then(function(e){angular.extend(i.model,e.data),i.subtitle=i.model.name}):void i.goToListView()}]);
//# sourceMappingURL=machinesList-Js.min.js.map
