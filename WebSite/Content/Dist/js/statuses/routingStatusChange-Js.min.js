angular.module("sfcRoutingStatusChange",["ui.router","datatables","datatables.bootstrap","dsrDataTables"]).config(["DefaultModuleStateProvider",function(t){t.initialize({entityName:"RoutingStatusChange",templatesPath:"/Areas/Statuses/Scripts/RoutingStatusChange/templates/"})}]),angular.module("sfcRoutingStatusChange").controller("RoutingStatusChangeListController",["DTColumnBuilder","$translate","localStorageService","$filter","dataTableHelper","DTOptionsBuilder","$http","$scope","$window","BackendRootUrl","toastrWrapper",function(t,e,a,o,n,r,s,i,l,c,d){function u(){s.post("/Statuses/RoutingStatusChange/GetEdit/").then(function(t){m.permissionToChangeDateParameter=t.data.configurationParameterPermissionToChangeDate;var e=t.data.statuses.routingStatusChange;angular.extend(m.model,e),m.workers=t.data.statuses.workers,m.workOrderStatuses=t.data.statuses.workOrderStatuses,m.routingStatuses=t.data.statuses.routingStatuses})}function h(e){return t.newColumn(e).withTitle(k).notSortable().withClass("select-checkbox").renderWith(function(t,a,o,n){var r=o[e];if(m.table.selected[r]=!1,m.options.checkboxFunction)var s="$ctrl.table.checkIfAllSelectedWithCallback($ctrl.options.checkboxFunction, $ctrl.rowsData['"+n.row+"'])";else var s="$ctrl.table.checkIfAllSelected()";return"<input ng-model=\"$ctrl.table.selected['"+r+'\']" ng-click="'+s+'" type="checkbox" ng-disabled="$ctrl.disableChecboxes" icheck />'})}function g(){function t(t){m.table.selected[t]=!0}var e=_.keys(m.table.selected);m.table.selectAll=!0,e.forEach(t)}function p(t,e,a){var o=function(t){t({recordsTotal:0,recordsFilterd:0,data:[]})},n="/Statuses/RoutingStatusChange/GetRoutings";t.additionalData=JSON.stringify({orderIds:b,inDataType:S}),s.post(n,t).then(function(t){t.data.error?(o(e),d.showError(t.data.error)):(e(t.data),s.post("/Statuses/RoutingStatusChange/GetParameters").then(function(t){var e=t.data;m.disableChecboxes=!e.portalMassOperationStatusChange,m.disableUpdateQtys=!e.portalMassStatusChangeQtyAdjustment,e.portalMassWOStatusChange&&e.portalMassOperationStatusChange&&1==S?g():e.portalMassOperationStatusChange&&2==S&&g()}))},function(){o(e)})}var m=this;m.model={};var w=o("formattedDateTime"),b=a.get("orderIds"),S=a.get("inDataType");a.bind(i,"showOpenedActivities"),a.bind(i,"showUpdateForm"),i.showOpenedWors=!0,i.showUpdateForm=!1;var C=[];m.disableChecboxes=!0,m.disableUpdateQtys=!0,m.permissionToChangeDateParameter=!1,m.inWorkOrder=1==S,m.options={columns:[t.newColumn("worker").withTitle(e("common.worker")),t.newColumn("number").withTitle(e("workorder.orderId")),t.newColumn("operation").withTitle(e("technology.operation")),t.newColumn("machine").withTitle(e("machine.name")),t.newColumn("startDate").withTitle(e("routingStatusChange.routingStart")).renderWith(function(t){return w(t)})],permissions:{}},m.backToMainView=function(){l.location.href=c+(1==S?"WorkOrders/WorkOrders/#/":"WorkOrders/Routing/#/")},m.getUpdateForm=function(){i.showOpenedWors=!1,i.showUpdateForm=!0,u(),C=m.table.getSelectedItemIds()},m.goToActivityView=function(){i.showUpdateForm=!1,i.showOpenedWors=!0},m.confirm=function(){s.post("/Statuses/RoutingStatusChange/ConfirmChange",{model:m.model,selectedOpenWorIds:C,selectedOrdersIds:b,inDataType:S}).then(function(){d.showTranslatedSuccess("routingStatusChange.savedSuccessfully"),l.location.href=c+(1==S?"WorkOrders/WorkOrders/#/":"WorkOrders/Routing/#/")})},m.dataTableInstance={},m.options.listViewCtrl=m,m.table=n.prepareModelForTable(),m.rowsData=[];var f=m.options.modelId||"id",k='<input ng-model="$ctrl.table.selectAll" ng-click="$ctrl.table.toggleAll()" type="checkbox" ng-disabled="$ctrl.disableChecboxes" icheck  />';m.dtOptions=r.newOptions().withOption("ajax",p).withDataProp("data").withOption("paging",!0).withOption("processing",!0).withOption("serverSide",!0).withOption("stateSave",!0).withOption("createdRow",function(t,e,a){var o=angular.element(t);o.attr("ng-class",'{"selected" : $ctrl.table.selected[\''+e[f]+"']}"),m.disableChecboxes||o.attr("ng-click","$ctrl.table.toggleOne('"+e[f]+"')"),m.rowsData[a]=e}).withPaginationType("full_numbers").withBootstrap(),m.options.columns.splice(0,0,h(f)),m.dtColumns=m.options.columns}]);
//# sourceMappingURL=routingStatusChange-Js.min.js.map
