angular.module("sfcPartAttributeSets",["ui.router","datatables","datatables.bootstrap","dsrDataTables"]).config(["DefaultModuleStateProvider",function(t){t.initialize({entityName:"PartAttributeSet",templatesPath:"/Areas/WorkOrders/StaticViews/PartAttributeSets/",permissionRoot:"WorkOrders/PartAttributeSets/"})}]).run(["$rootScope","$translate",function(t,e){e("partAttributeSet.attributeSets").then(function(e){t.title=e})}]),angular.module("sfcPartAttributeSets").directive("uniqueAttributeValidator",[function(){return{restrict:"A",require:"ngModel",link:function(t,e,r,i){i.$validators.uniqueAttributeValidator=function(e,i){if(!e)return!0;var a=t.$eval(r.uniqueAttributeValidator);if(a.currentItem.toRemove)return!0;var o=_.any(a.modelList,function(t){return!t.toRemove&&t.partAttributeID===e&&t.$$hashKey!==a.currentItem.$$hashKey});return!o}}}}]).component("setAttributesPanel",{templateUrl:"/Areas/WorkOrders/Scripts/PartAttributeSets/directives/templates/setAttributesPanel.template.html",bindings:{attributes:"=",attributeDefinitions:"<",readonly:"<"},controller:["$scope","$timeout",function(t,e){var r=this;r.revalidate=function(){t.$broadcast("event:revalidate-attributes")},r.onKeyAtrributeChange=function(t){angular.forEach(r.attributes,function(e){e.$$hashKey!==t.$$hashKey&&(e.isKeyAttribute=!1)})}}]}),angular.module("sfcPartAttributeSets").controller("AddOrUpdatePartAttributeSetController",["$scope","$state","$stateParams","$translate","$http","$q","toastrWrapper","confirmationService",function(t,e,r,i,a,o,n,s){function u(){a.post("/WorkOrders/PartAttributeSets/GetEdit/"+(r.id||"")).then(function(t){var e=t.data.partAttributeSet;angular.extend(l.model,e),l.attributeDefinitions=t.data.attributeDefinitions})}var l=this;return l.model={attributes:[]},l.isEditMode="edit"===e.current.name,l.save=function(){var t=_.filter(l.model.attributes,function(t){return!t.toRemove}),e=l.model.attributes.length!==t.length,r=l.isEditMode&&e?s.showConfirmationWithWarning(i("partAttributeSet.saveConfirmationMessage"),i("partAttributeSet.saveWarningMessage")).result:o.resolve(!0);r.then(function(){var e=angular.copy(l.model);return e.attributes=t,a.post("/WorkOrders/PartAttributeSets/AddOrUpdate",e).then(function(){n.showTranslatedSuccess("partAttributeSet.savedSuccessfully"),l.goToListView()})})},l.goToListView=function(){e.go("list")},l.isEditMode&&!r.id?void l.goToListView():void u()}]),angular.module("sfcPartAttributeSets").controller("PartAttributeSetListController",["DTColumnBuilder","$translate","$filter",function(t,e,r){var i=this;i.options={tableDataUrl:"/WorkOrders/PartAttributeSets/GetList",columns:[t.newColumn("name").withTitle(e("common.name")),t.newColumn("description").withTitle(e("common.description"))],permissions:{view:"WorkOrders/PartAttributeSets/View",edit:"WorkOrders/PartAttributeSets/Edit",delete:"",add:"WorkOrders/PartAttributeSets/Add"}}}]),angular.module("sfcPartAttributeSets").controller("PreviewPartAttributeSetController",["$state","$stateParams","$http",function(t,e,r){var i=this;return i.model={},i.goToListView=function(){t.go("list")},i.goToEditView=function(){t.go("edit",{id:i.model.id})},e.id?void r.post("/WorkOrders/PartAttributeSets/Get/"+e.id).then(function(t){angular.extend(i.model,t.data),i.subtitle=i.model.name}):void i.goToListView()}]);
//# sourceMappingURL=partAttributeSets-Js.min.js.map
