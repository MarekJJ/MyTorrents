{"version":3,"sources":["common-Js.min.js"],"names":["angular","module","config","$httpProvider","$translateProvider","toastrConfig","uiSelectConfig","dynamicNumberStrategyProvider","CurrentLanguage","$provide","interceptors","push","useStaticFilesLoader","prefix","suffix","useSanitizeValueStrategy","addInterpolation","preferredLanguage","theme","resetSearchInput","appendToBody","extend","positionClass","addStrategy","numThousand","numInt","numFract","numSep","numNeg","decorator","$delegate","directive","templateUrl","element","attrs","run","$rootScope","$window","permissionService","datatablesConfigurationService","Permissions","$on","event","toState","toParams","fromState","fromParams","_","isString","permission","hasPermission","preventDefault","scrollTo","setPermissions","factory","permissionList","permissions","contains","toastr","$translate","prepareValidationErrorList","validationData","list","forEach","value","key","isArray","length","v","showNotification","notificationType","message","timeout","options","closeButton","extendedTimeOut","timeOut","showError","errorMessage","error","showValidationError","messageKey","then","allowHtml","showTranslatedNotification","interpolationData","that","this","showTranslatedWarning","showTranslatedError","showTranslatedSuccess","showTranslatedInfo","BackendRootUrl","getImageUrl","urlRoot","imageAttachmentId","getPlaceholderUrl","ngProgressFactory","getNextActionId","requestId","progressbar","createInstance","setHeight","setColor","runningActions","start","id","isEmpty","stop","complete","$http","confirmationService","removeActionUrl","confirmationMessageKey","confirmAndRemove","itemIds","warningMessageKey","isNumber","confirmationMesssagePromise","COUNT","warningMessagePromise","showConfirmationPromise","showConfirmationWithWarning","showConfirmation","result","post","remove","removeWithWarning","provider","$stateProvider","$urlRouterProvider","initialize","state","name","url","templatesPath","controller","entityName","permissionRoot","params","previewPermission","otherwise","$get","link","scope","permissionName","trim","notPermissionFlag","slice","show","hide","template","attr","isChecked","checked","children","toggleClass","$timeout","$parse","priority","restrict","require","ngModel","update","type","$setViewValue","iCheck","checkboxClass","radioClass","on","e","$apply","target","ngClick","$watch","ngChecked","$viewValue","model","ngDisabled","disabled","$touched","$invalid","invalid","parent","transclude","title","subtitle","label","isRequired","service","markFormAsTouched","form","$error","field","errorField","undefined","$submitted","$setTouched","formValidationHelper","submitAction","which","$q","$state","attributes","$asyncValidators","uniqueAsyncValidator","modelValue","modelId","$eval","response","data","resolve","reject","component","bindings","addButton","editButton","previewButton","removeButton","DTOptionsBuilder","DTColumnBuilder","genericDataTableAjaxProvider","dataTableHelper","getSelectColumn","newColumn","withTitle","titleHtml","notSortable","withClass","renderWith","full","meta","vm","table","selected","dataTableInstance","prepareModelForTable","dtOptions","newOptions","withOption","tableDataUrl","withDataProp","row","index","withPaginationType","withBootstrap","columns","splice","dtColumns","goToAddItemView","go","goToPreviewView","selectedItemId","getSelectedItemIds","goToEditView","goToDetails","removeSelectedItems","itemsToRemove","removeItems","reloadData","uiSelect","searchInput","addClass","removeClass","off","GlobalConfiguration","required","formCtrl","dateFieldOptions","allowInputToggle","locale","format","dateTimeFormat","dateFormat","$filter","Value","increment","decrement","durationValue","textInput","find","days","hours","isOpen","focus","onKeyUp","isLast","keyCode","closeOnTabPress","durationValueFilter","$watchGroup","newValues","textInputValue","newValue","oldValue","isNaN","Math","floor","eventName","revalidateOn","$validate","$validators","maxValue","$render","$setValidity","minValue","greaterThanZero","uniqueOperationValidator","modelList","duplicates","filter","obj","operation","$$hashKey","elementKey","uniqueWithParentAsyncValidator","modelParentId","parentId","$templateCache","appendVersion","queryParameterSeparator","indexOf","Date","getTime","request","isTemplateCacheRequest","method","get","replace","headers","$injector","toastrWrapper","responseError","status","location","reload","progressActionId","inputValue","moment","$uibModal","showConfirmationModal","confirmationMessage","warningMessage","open","showTranslatedConfirmation","close","dismiss","$ctrl","$onInit","errorCallback","callback","recordsTotal","recordsFilterd","settings","toggleAll","each","keys","selectAll","toggleOne","checkIfAllSelected","allRowSelected","isAnyRowSelected","some","values","all","onlyOneSelected","selectedItems","selectedItemIds","clear","throttle","DTDefaultOptions","setLanguage","$compile","onPreDraw","childScope","$destroy","preDrawCallback","onDraw","$new","processing","processingIndicator","nTableWrapper","css","html","ctrl","bodyElement","$","sidebarMenuElement","append","hasClass","listItem","is","slideUp","slideDown"],"mappings":"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","file":"common-Js.min.js","sourcesContent":["angular\r\n    .module('sfcCommon', ['datatables', 'ui.router', 'pascalprecht.translate'])\r\n    .config(['$httpProvider', '$translateProvider', 'toastrConfig', 'uiSelectConfig', 'dynamicNumberStrategyProvider', 'CurrentLanguage', '$provide',\r\n    function ($httpProvider, $translateProvider, toastrConfig, uiSelectConfig, dynamicNumberStrategyProvider, CurrentLanguage, $provide) {\r\n\r\n        $httpProvider.interceptors.push('progressIndicatorInterceptor');\r\n        $httpProvider.interceptors.push('requestInterceptor');\r\n        $httpProvider.interceptors.push('responseNotificationInterceptor');\r\n        $httpProvider.interceptors.push('responseErrorInterceptor');\r\n\r\n        $translateProvider.useStaticFilesLoader({\r\n            prefix: '/Content/i18n/locale-',\r\n            suffix: '.json'\r\n        });\r\n\r\n        $translateProvider.useSanitizeValueStrategy('escape');\r\n        $translateProvider.addInterpolation('$translateMessageFormatInterpolation');\r\n        $translateProvider.preferredLanguage(CurrentLanguage);\r\n\r\n        uiSelectConfig.theme = 'bootstrap';\r\n        uiSelectConfig.resetSearchInput = true;\r\n        uiSelectConfig.appendToBody = true;\r\n\r\n\r\n        angular.extend(toastrConfig, {\r\n            positionClass: 'toast-bottom-right'\r\n        });\r\n\r\n        dynamicNumberStrategyProvider.addStrategy('byte', {\r\n            numThousand: false,\r\n            numInt: 3,\r\n            numFract: 0\r\n        });\r\n        dynamicNumberStrategyProvider.addStrategy('integer', {\r\n            numSep: '.',\r\n            numThousand: false,\r\n            numInt: 10,\r\n            numFract: 0\r\n        });\r\n        dynamicNumberStrategyProvider.addStrategy('positive-integer', {\r\n            numSep: '.',\r\n            numThousand: false,\r\n            numInt: 10,\r\n            numFract: 0,\r\n            numNeg: false\r\n        });\r\n        dynamicNumberStrategyProvider.addStrategy('decimal', {\r\n            numSep: '.',\r\n            numThousand: false,\r\n            numInt: 8,\r\n            numFract: 10\r\n        });\r\n        dynamicNumberStrategyProvider.addStrategy('positive-decimal', {\r\n            numSep: '.',\r\n            numThousand: false,\r\n            numInt: 8,\r\n            numFract: 10,\r\n            numNeg: false\r\n        });\r\n        dynamicNumberStrategyProvider.addStrategy('small-decimal', {\r\n            numSep: '.',\r\n            numThousand: false,\r\n            numInt: 5,\r\n            numFract: 2\r\n        });\r\n        dynamicNumberStrategyProvider.addStrategy('positive-small-decimal', {\r\n            numSep: '.',\r\n            numThousand: false,\r\n            numInt: 5,\r\n            numFract: 2,\r\n            numNeg: false\r\n        });\r\n\r\n        $provide.decorator('uibAccordionGroupDirective', ['$delegate', function ($delegate) {\r\n            var directive = $delegate[0];\r\n            directive.templateUrl = function (element, attrs) {\r\n                return attrs.templateUrl || '/Content/Scripts/Common/templates/_accordionOverrideTemplate.html';\r\n            }\r\n            return $delegate;\r\n        }]);\r\n    }])\r\n    .run(['$rootScope', '$window', 'permissionService', 'datatablesConfigurationService', 'Permissions', function ($rootScope, $window, permissionService, datatablesConfigurationService, Permissions) {\r\n\r\n        $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {\r\n            if (_.isString(toState.permission) && !permissionService.hasPermission(toState.permission)) {\r\n                event.preventDefault();\r\n            }\r\n        });\r\n\r\n        $rootScope.$on('$stateChangeSuccess', function () {\r\n            $window.scrollTo(0, 0);\r\n        });\r\n\r\n        permissionService.setPermissions(Permissions);\r\n\r\n        datatablesConfigurationService();\r\n\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('permissionService', function () {\r\n        var permissionList = [];\r\n        return {\r\n            setPermissions: function (permissions) {\r\n                permissionList = permissions;\r\n            },\r\n            hasPermission: function (permission) {\r\n                return _.contains(permissionList, permission);\r\n            }\r\n        }\r\n    });\nangular\r\n    .module('sfcCommon')\r\n    .factory('toastrWrapper', ['toastr', '$translate', function (toastr, $translate) {\r\n\r\n        function prepareValidationErrorList(validationData) {\r\n            var list = '<ul>';\r\n            angular.forEach(validationData, function (value, key) {\r\n                if (angular.isArray(value) && value.length > 0) {\r\n                    angular.forEach(value, function (v) {\r\n                        list += '<li>' + v + '</li>';\r\n                    })\r\n                }\r\n            });\r\n\r\n            list += '</ul>';\r\n            return list;\r\n        }\r\n\r\n        return {\r\n            showNotification: function (notificationType, message) {\r\n                var timeout = notificationType !== 'error' ? 1500 : 0;\r\n                var options = { closeButton: true, extendedTimeOut: 1000, timeOut: timeout };\r\n                toastr[notificationType](message, options);\r\n            },\r\n\r\n            showError: function(errorMessage) {\r\n                toastr.error(errorMessage, { closeButton: true, extendedTimeOut: 1000, timeOut: 0 });\r\n            },\r\n\r\n            showValidationError: function (messageKey, validationData) {\r\n                var list = prepareValidationErrorList(validationData);\r\n                $translate(messageKey).then(function (errorMessage) {\r\n                    toastr.error(list, errorMessage, { closeButton: true, extendedTimeOut: 1000, timeOut: 0, allowHtml: true });\r\n                });\r\n            },\r\n\r\n            showTranslatedNotification: function (notificationType, messageKey, interpolationData) {\r\n                var that = this;\r\n                $translate(messageKey, interpolationData).then(function (errorMessage) {\r\n                    that.showNotification(notificationType, errorMessage);\r\n                });\r\n            },\r\n\r\n            showTranslatedWarning: function (messageKey, interpolationData) {\r\n                this.showTranslatedNotification('warning', messageKey, interpolationData);\r\n            },\r\n\r\n            showTranslatedError: function (messageKey, interpolationData) {\r\n                this.showTranslatedNotification('error', messageKey, interpolationData);\r\n            },\r\n\r\n            showTranslatedSuccess: function (messageKey, interpolationData) {\r\n                this.showTranslatedNotification('success', messageKey, interpolationData);\r\n            },\r\n\r\n            showTranslatedInfo: function (messageKey, interpolationData) {\r\n                this.showTranslatedNotification('info', messageKey, interpolationData);\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('imageAttachmentUrlHelper', ['BackendRootUrl', function (BackendRootUrl) {\r\n        return {\r\n            getImageUrl: function (urlRoot, imageAttachmentId) {\r\n                if (imageAttachmentId) {\r\n                    return BackendRootUrl + urlRoot + imageAttachmentId;\r\n                }\r\n                else {\r\n                    return this.getPlaceholderUrl();\r\n                }\r\n            },\r\n\r\n            getPlaceholderUrl: function () {\r\n                return BackendRootUrl + 'Content/Images/no-image-placeholder.png';\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('progressIndicatorService', ['ngProgressFactory', function (ngProgressFactory) {\r\n\r\n        var requestId = 1;\r\n        var progressbar = ngProgressFactory.createInstance();\r\n\r\n        progressbar.setHeight('1px');\r\n        progressbar.setColor('#1aa5bb');\r\n\r\n        function getNextActionId() {\r\n            return requestId++;\r\n        }\r\n\r\n        var runningActions = {};\r\n\r\n        return {\r\n            start: function () {\r\n                var id = getNextActionId();\r\n                if (_.isEmpty(runningActions)) {\r\n                    progressbar.start();\r\n                }\r\n                runningActions[id] = true;\r\n                return id;\r\n            },\r\n            stop: function (id) {\r\n                delete runningActions[id];\r\n                if (_.isEmpty(runningActions)) {\r\n                    progressbar.complete();\r\n                }\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('genericRemoveService', ['$http', '$translate', 'confirmationService', function ($http, $translate, confirmationService) {\r\n        return function (removeActionUrl, confirmationMessageKey) {\r\n\r\n            function confirmAndRemove(itemIds, warningMessageKey) {\r\n                if (angular.isNumber(itemIds)) {\r\n                    itemIds = [itemIds];\r\n                }\r\n\r\n                var confirmationMesssagePromise = $translate(confirmationMessageKey, { COUNT: itemIds.length }, 'messageformat');\r\n                var warningMessagePromise = warningMessageKey ? $translate(warningMessageKey) : null;\r\n\r\n                var showConfirmationPromise = warningMessagePromise\r\n                    ? confirmationService.showConfirmationWithWarning(confirmationMesssagePromise, warningMessagePromise)\r\n                    : confirmationService.showConfirmation(confirmationMesssagePromise);\r\n\r\n                return showConfirmationPromise.result.then(function () {\r\n                    return $http.post(removeActionUrl, { itemIds: itemIds });\r\n                });\r\n            }\r\n\r\n            return {\r\n                remove: function (itemIds) {\r\n                    return confirmAndRemove(itemIds);\r\n                },\r\n\r\n                removeWithWarning: function (itemIds, warningMessageKey) {\r\n                    return confirmAndRemove(itemIds, warningMessageKey);\r\n                }\r\n            };\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .provider('DefaultModuleState', ['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\r\n\r\n        this.initialize = function (options) {\r\n\r\n            $stateProvider.state({\r\n                name: 'list',\r\n                url: '/',\r\n                templateUrl: options.templatesPath + 'list.html',\r\n                controller: 'List' + options.entityName + 'Controller as $ctrl',\r\n            });\r\n\r\n            $stateProvider.state({\r\n                name: 'add',\r\n                url: '/add',\r\n                templateUrl: options.templatesPath + 'addOrUpdate.html',\r\n                controller: 'AddOrUpdate' + options.entityName + 'Controller as $ctrl',\r\n                permission: options.permissionRoot + 'Add'\r\n            });\r\n\r\n            $stateProvider.state({\r\n                name: 'edit',\r\n                url: '/edit/{id}',\r\n                templateUrl: options.templatesPath + 'addOrUpdate.html',\r\n                controller: 'AddOrUpdate' + options.entityName + 'Controller as $ctrl',\r\n                permission: options.permissionRoot + 'Edit',\r\n                params: { 'id': '' }\r\n            });\r\n\r\n            $stateProvider.state({\r\n                name: 'preview',\r\n                url: '/preview/{id}',\r\n                templateUrl: options.templatesPath + 'preview.html',\r\n                controller: 'Preview' + options.entityName + 'Controller as $ctrl',\r\n                permission: options.permissionRoot + (options.previewPermission || 'View'),\r\n                params: { 'id': '' }\r\n            });\r\n\r\n            $urlRouterProvider.otherwise('/');\r\n        };\r\n\r\n        this.$get = function () {\r\n            return {\r\n                initialize: this.initialize\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('hasPermission', ['permissionService', function (permissionService) {\r\n        return {\r\n            link: function (scope, element, attrs) {\r\n                if (!_.isString(attrs.hasPermission)) {\r\n                    throw 'hasPermission value must be a string'\r\n                }\r\n\r\n                var permissionName = attrs.hasPermission.trim();\r\n                var notPermissionFlag = permissionName[0] === '!';\r\n                if (notPermissionFlag) {\r\n                    permissionName = permissionName.slice(1).trim();\r\n                }\r\n\r\n                var hasPermission = permissionService.hasPermission(permissionName);\r\n                if (hasPermission && !notPermissionFlag || !hasPermission && notPermissionFlag) {\r\n                    element.show();\r\n                }\r\n                else {\r\n                    element.hide();\r\n                }\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('readonlyCheckbox', function () {\r\n        return {\r\n            template: '<div class=\"icheckbox_flat-blue disabled\"></div>',\r\n            link: function (scope, element, attr) {\r\n                var isChecked = attr.checked === 'true';\r\n                element.children().toggleClass('checked', isChecked);\r\n            }\r\n        }\r\n    })\r\n    .directive('icheck', ['$timeout', '$parse', function ($timeout, $parse) {\r\n        return {\r\n            priority: 100,\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attr, ngModel) {\r\n                $timeout(function () {\r\n                    var value = attr.value;\r\n\r\n                    function update(checked) {\r\n                        if (attr.type === 'radio') {\r\n                            ngModel.$setViewValue(value);\r\n                        } else {\r\n                            ngModel.$setViewValue(checked);\r\n                        }\r\n                    }\r\n\r\n                    element.iCheck({\r\n                        checkboxClass: attr.checkboxClass || 'icheckbox_flat-blue',\r\n                        radioClass: attr.radioClass || 'iradio_flat-blue'\r\n                    }).on('ifChanged', function (e) {\r\n                        $timeout(function () {\r\n                            scope.$apply(function () {\r\n                                update(e.target.checked);\r\n                            });\r\n                            scope.$apply(attr.ngClick);\r\n                        });\r\n                    });\r\n\r\n                    scope.$watch(attr.ngChecked, function (checked) {\r\n                        if (typeof checked === 'undefined') checked = !!ngModel.$viewValue;\r\n                        update(checked)\r\n                    }, true);\r\n\r\n                    scope.$watch(attr.ngModel, function (model) {\r\n                        element.iCheck('update');\r\n                    }, true);\r\n\r\n                    scope.$watch(attr.ngDisabled, function (disabled) {\r\n                        element.iCheck('update');\r\n                    });\r\n\r\n                    scope.$watch(function () {\r\n                        return ngModel.$touched && ngModel.$invalid;\r\n                    }, function (invalid) {\r\n                        element.parent().toggleClass('invalid', invalid);\r\n                    })\r\n\r\n                    scope.$on('$destroy', function () {\r\n                        element.iCheck('destroy');\r\n                    });\r\n                })\r\n            }\r\n        }\r\n    }]);\r\n\nangular\r\n    .module('sfcCommon')\r\n    .directive('viewHeader', [function () {\r\n        return {\r\n            restrict: 'E',\r\n            transclude: true,\r\n            templateUrl: '/Content/Scripts/Common/templates/_viewHeaderTemplate.html',\r\n            scope: {\r\n                title: '@',\r\n                subtitle: '@'\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('formGroup', [function () {\r\n        return {\r\n            restrict: 'E',\r\n            template: ' <div class=\"form-group\"><label class=\"col-sm-3 col-xs-12 control-label\">{{ label }}<span ng-if=\"isRequired\" class=\"required-field-marker\">*</span></label><div class=\"col-sm-8 col-lg-6 col-xs-12\"><ng-transclude /></div></div>',\r\n            transclude: true,\r\n            scope: {\r\n                label: '@',\r\n                isRequired: '<'\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .service('formValidationHelper', function () {\r\n\r\n        function markFormAsTouched(form) {\r\n            angular.forEach(form.$error, function (field) {\r\n                angular.forEach(field, function (errorField) {\r\n                    if (errorField.$submitted !== undefined) {\r\n                        markFormAsTouched(errorField);\r\n                    } else {\r\n                        errorField.$setTouched();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        return {\r\n            markFormAsTouched: markFormAsTouched\r\n        }\r\n    })\r\n    .directive('formSubmitOnEnter', ['formValidationHelper', function (formValidationHelper) {\r\n        return {\r\n            scope: {\r\n                submitAction: '&formSubmitOnEnter',\r\n                form: '<'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                element.on('keypress', function(event) {\r\n                    if (event.which === 13) {\r\n                        event.preventDefault();\r\n                        scope.$apply(function () {\r\n                            if (scope.form.$invalid) {\r\n                                formValidationHelper.markFormAsTouched(scope.form);\r\n                            } else {\r\n                                scope.submitAction();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }])\r\n    .directive('formSubmitButton', ['$timeout', 'formValidationHelper', function ($timeout, formValidationHelper) {\r\n        return {\r\n            scope: {\r\n                submitAction: '&formSubmitButton',\r\n                form: '<'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                element.on('click', function () {\r\n                    $timeout(function () {\r\n                        if (scope.form.$invalid) {\r\n                            formValidationHelper.markFormAsTouched(scope.form);\r\n                        } else {\r\n                            scope.submitAction();\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        };\r\n    }]);\r\n\nangular\r\n    .module('sfcCommon')\r\n    .directive('uniqueAsyncValidator', ['$q', '$http', '$state', function ($q, $http, $state) {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attributes, ngModel) {\r\n                ngModel.$asyncValidators.uniqueAsyncValidator = function (modelValue) {\r\n\r\n                    var modelId = scope.$eval(attributes.modelId);\r\n                    var url = attributes.uniqueAsyncValidator;\r\n\r\n                    return $http.post(url, { id: modelId, value: modelValue })\r\n                         .then(function (response) {\r\n                             if (response.data === true) {\r\n                                 return $q.resolve();\r\n                             } else {\r\n                                 return $q.reject();\r\n                             }\r\n                         });\r\n                };\r\n            }\r\n        };\r\n    }])\r\n    .component('defaultListView', {\r\n        bindings: {\r\n            title: '@',\r\n            addButton: '@',\r\n            editButton: '@',\r\n            previewButton: '@',\r\n            removeButton: '@',\r\n            options: '='\r\n        },\r\n        templateUrl: '/Content/Scripts/Common/templates/_defaultListViewTemplate.html',\r\n        controller: ['DTOptionsBuilder', 'DTColumnBuilder', '$state', 'genericDataTableAjaxProvider', 'dataTableHelper', 'permissionService',\r\n         function (DTOptionsBuilder, DTColumnBuilder, $state, genericDataTableAjaxProvider, dataTableHelper, permissionService) {\r\n             var vm = this;\r\n\r\n             vm.dataTableInstance = {};\r\n             vm.table = dataTableHelper.prepareModelForTable();\r\n\r\n             var modelId = vm.options.modelId || 'id';\r\n             var titleHtml = '<input ng-model=\"$ctrl.table.selectAll\" ng-click=\"$ctrl.table.toggleAll()\" type=\"checkbox\" icheck  />';\r\n\r\n             vm.dtOptions = DTOptionsBuilder.newOptions()\r\n                 .withOption('ajax', genericDataTableAjaxProvider(vm.options.tableDataUrl))\r\n                 .withDataProp('data')\r\n                 .withOption('paging', true)\r\n                 .withOption('processing', true)\r\n                 .withOption('serverSide', true)\r\n                 .withOption('createdRow', function (row, data, index) {\r\n                     angular.element(row).attr('ng-class', '{\"selected\" : $ctrl.table.selected[\\'' + data[modelId] + '\\']}');\r\n                     angular.element(row).attr('ng-click', '$ctrl.table.toggleOne(\\'' + data[modelId] + '\\')');\r\n                     angular.element(row).attr('ng-dblclick', '$ctrl.goToDetails(\\'' + data[modelId] + '\\')');\r\n                 })\r\n                 .withPaginationType('full_numbers')\r\n                 .withBootstrap();\r\n\r\n             function getSelectColumn(modelId) {\r\n                 return DTColumnBuilder\r\n                     .newColumn(modelId)\r\n                     .withTitle(titleHtml)\r\n                     .notSortable()\r\n                     .withClass('select-checkbox')\r\n                     .renderWith(function (data, type, full, meta) {\r\n                         var key = full[modelId];\r\n                         vm.table.selected[key] = false;\r\n                         return '<input ng-model=\"$ctrl.table.selected[\\'' + key + '\\']\" ng-click=\"$ctrl.table.checkIfAllSelected()\" type=\"checkbox\" icheck />';\r\n                     });\r\n             }\r\n\r\n             vm.options.columns.splice(0, 0, getSelectColumn(modelId));\r\n             vm.dtColumns = vm.options.columns;\r\n\r\n             vm.goToAddItemView = function () {\r\n                 $state.go('add');\r\n             };\r\n\r\n             vm.goToPreviewView = function (id) {\r\n                 var selectedItemId = id || vm.table.getSelectedItemIds()[0];\r\n                 $state.go('preview', { id: selectedItemId });\r\n             };\r\n\r\n             vm.goToEditView = function (id) {\r\n                 var selectedItemId = id || vm.table.getSelectedItemIds()[0];\r\n                 $state.go('edit', { id: selectedItemId });\r\n             };\r\n\r\n             vm.goToDetails = function (id) {\r\n                 if (permissionService.hasPermission(vm.options.permissions['edit'])) {\r\n                     vm.goToEditView(id);\r\n                 }\r\n                 else if (permissionService.hasPermission(vm.options.permissions['view'])) {\r\n                     vm.goToPreviewView(id);\r\n                 }\r\n             };\r\n\r\n             vm.removeSelectedItems = function () {\r\n                 var itemsToRemove = vm.table.getSelectedItemIds();\r\n                 vm.options.removeItems(itemsToRemove).then(function () {\r\n                     vm.dataTableInstance.reloadData();\r\n                 });\r\n             };\r\n         }]\r\n    });\nangular\r\n    .module('sfcCommon')\r\n    .directive('uiSelectMultipleFocusFix', function () {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'uiSelect',\r\n            link: function (scope, element, attr, uiSelect) {\r\n                var searchInput = uiSelect.searchInput;\r\n\r\n                searchInput.on('focus', function () {\r\n                    element.addClass('focus');\r\n                });\r\n\r\n                searchInput.on('blur', function () {\r\n                    element.removeClass('focus');\r\n                });\r\n\r\n                scope.$on('$destroy', function () {\r\n                    searchInput.off('focus');\r\n                    searchInput.off('blur');\r\n                });\r\n            }\r\n        };\r\n    });\nangular\r\n    .module('sfcCommon')\r\n     .directive('datePicker', ['CurrentLanguage', 'GlobalConfiguration', function (CurrentLanguage, GlobalConfiguration) {\r\n         return {\r\n             templateUrl: '/Content/Scripts/Common/templates/_datePickerTemplate.html',\r\n             require: '^^form',\r\n             scope: {\r\n                 name: '@',\r\n                 model: '=',\r\n                 field: '@',\r\n                 required: '=',\r\n                 type: '@',\r\n                 disabled: \"=\"\r\n             },\r\n             link: function (scope, element, attrs, formCtrl) {\r\n                 scope.formCtrl = formCtrl;\r\n\r\n                 scope.dateFieldOptions = {\r\n                     allowInputToggle: true,\r\n                     locale: CurrentLanguage,\r\n                     format: scope.type === 'dateTime' ? GlobalConfiguration.dateTimeFormat : GlobalConfiguration.dateFormat\r\n                 };\r\n\r\n                 scope.show = true;\r\n             }\r\n         }\r\n     }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('durationPicker', ['$timeout', '$filter', '$translate', function ($timeout, $filter, $translate) {\r\n        function Value(v) {\r\n            this.value = v || 0;\r\n\r\n            this.increment = function () {\r\n                this.value++;\r\n            };\r\n\r\n            this.decrement = function () {\r\n                if (this.value > 0) {\r\n                    this.value--;\r\n                }\r\n            };\r\n        }\r\n\r\n        return {\r\n            templateUrl: '/Content/Scripts/Common/templates/_durationPickerTemplate.html',\r\n            scope: {\r\n                durationValue: '='\r\n            },\r\n            link: function (scope, element, attrs) {\r\n\r\n                var textInput = element.find('input[type=text]');\r\n\r\n                scope.days = new Value();\r\n                scope.hours = new Value();\r\n\r\n                textInput.on('focus', function () {\r\n                    scope.$apply(function () {\r\n                        scope.isOpen = true;\r\n\r\n                        $timeout(function () {\r\n                            element.find('.popover-content input:first').focus();\r\n                        }, 100);\r\n                    });\r\n                });\r\n\r\n                element.find('.input-group-addon').on('click', function () {\r\n                    textInput.focus();\r\n                });\r\n\r\n                scope.onKeyUp = function (event, value, isLast) {\r\n                    if (event.keyCode === 38) {\r\n                        value.increment();\r\n\r\n                    } else if (event.keyCode === 40) {\r\n                        value.decrement();\r\n                    }\r\n                };\r\n\r\n                scope.closeOnTabPress = function (event) {\r\n                    if (event.keyCode === 9) {\r\n                        scope.isOpen = false;\r\n                    }\r\n                };\r\n\r\n                scope.hide = function () {\r\n                    scope.isOpen = false;\r\n                };\r\n\r\n                var durationValueFilter = $filter('durationValue');\r\n\r\n                scope.$watchGroup(['days.value', 'hours.value'], function (newValues) {\r\n                    var value = scope.days.value * 24 + scope.hours.value;\r\n\r\n                    scope.textInputValue = durationValueFilter(value);\r\n                    scope.durationValue = value;\r\n                });\r\n\r\n                scope.$watch('durationValue', function (newValue, oldValue) {\r\n                    if (newValue === undefined || isNaN(newValue))\r\n                        return;\r\n\r\n                    scope.days.value = Math.floor(newValue / 24);\r\n                    scope.hours.value = newValue % 24;\r\n                });\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('revalidateOn', [function () {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attrs, ngModel) {\r\n                var eventName = attrs.revalidateOn;\r\n\r\n                scope.$on(eventName, function () {\r\n                    ngModel.$validate();\r\n                });\r\n            }\r\n        }\r\n    }])\r\n    .directive('maxValue', ['$parse', function ($parse) {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attributes, ngModel) {\r\n                ngModel.$validators.maxValue = function (modelValue) {\r\n\r\n                    if (_.isNaN(modelValue)) {\r\n                        ngModel.$viewValue = '';\r\n                        ngModel.$render();\r\n                        ngModel.$setValidity('required', false);\r\n                        return true;\r\n                    }\r\n\r\n                    var maxValue = $parse(attributes.maxValue)(scope);\r\n                    return modelValue <= maxValue;\r\n                };\r\n            }\r\n        };\r\n    }])\r\n    .directive('minValue', ['$parse', function ($parse) {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attributes, ngModel) {\r\n                ngModel.$validators.minValue = function (modelValue) {\r\n\r\n                    if (_.isNaN(modelValue)) {\r\n                        ngModel.$viewValue = '';\r\n                        ngModel.$render();\r\n                        ngModel.$setValidity('required', false);\r\n                        return true;\r\n                    }\r\n\r\n                    var minValue = $parse(attributes.minValue)(scope);\r\n                    return modelValue >= minValue;\r\n                };\r\n            }\r\n        };\r\n    }])\r\n    .directive('greaterThanZero', ['$parse', function ($parse) {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attributes, ngModel) {\r\n                ngModel.$validators.greaterThanZero = function (modelValue) {\r\n\r\n                    if (_.isNaN(modelValue)) {\r\n                        ngModel.$viewValue = '';\r\n                        ngModel.$render();\r\n                        ngModel.$setValidity('required', false);\r\n                        return true;\r\n                    }\r\n\r\n                    return modelValue > 0;\r\n                };\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('uniqueAsyncValidator', ['$q', '$http', function ($q, $http) {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attributes, ngModel) {\r\n                ngModel.$asyncValidators.uniqueAsyncValidator = function (modelValue) {\r\n\r\n                    var modelId = scope.$eval(attributes.modelId);\r\n                    var url = attributes.uniqueAsyncValidator;\r\n\r\n                    return $http.post(url, { id: modelId, value: modelValue })\r\n                         .then(function (response) {\r\n                             if (response.data === true) {\r\n                                 return $q.resolve();\r\n                             } else {\r\n                                 return $q.reject();\r\n                             }\r\n                         });\r\n                };\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('uniqueOperationValidator', [function () {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attributes, ngModel) {\r\n                ngModel.$validators.uniqueOperationValidator = function (modelValue) {\r\n                    var name = attributes.name;\r\n                    var list = scope.$eval(attributes.modelList);\r\n                    var duplicates = _.filter(list, function (obj) {\r\n                        return obj.operation == modelValue && obj.$$hashKey != scope.$eval(attributes.elementKey)\r\n                    });\r\n                    return duplicates.length == 0;\r\n                };\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .directive('uniqueWithParentAsyncValidator', ['$q', '$http', function ($q, $http) {\r\n        return {\r\n            restrict: 'A',\r\n            require: 'ngModel',\r\n            link: function (scope, element, attributes, ngModel) {\r\n                ngModel.$asyncValidators.uniqueWithParentAsyncValidator = function (modelValue) {\r\n\r\n                    var modelId = scope.$eval(attributes.modelId);\r\n                    var modelParentId = scope.$eval(attributes.modelParentId);\r\n                    var url = attributes.uniqueWithParentAsyncValidator;\r\n\r\n                    return $http.post(url, { id: modelId, parentId: modelParentId, value: modelValue })\r\n                         .then(function (response) {\r\n                             if (response.data === true) {\r\n                                 return $q.resolve();\r\n                             } else {\r\n                                 return $q.reject();\r\n                             }\r\n                         });\r\n                };\r\n            }\r\n        };\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('requestInterceptor', ['$templateCache', 'BackendRootUrl', function ($templateCache, BackendRootUrl) {\r\n\r\n        function appendVersion(url) {\r\n            var queryParameterSeparator = url.indexOf('?') === -1 ? '?' : '&';\r\n            return url + queryParameterSeparator + 'v=' + new Date().getTime();\r\n        }\r\n\r\n        return {\r\n            request: function (config) {\r\n                var isTemplateCacheRequest = (config.method === 'GET' && $templateCache.get(config.url) !== undefined);\r\n\r\n                if (!isTemplateCacheRequest) {\r\n                    var url = BackendRootUrl + config.url;\r\n                    url = url.replace('//', '/');\r\n\r\n                    config.url = appendVersion(url);\r\n                }\r\n\r\n                config.headers['X-Requested-With'] = 'XMLHttpRequest';\r\n\r\n                return config;\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('responseNotificationInterceptor', ['$injector', function ($injector) {\r\n        return {\r\n            response: function(response) {\r\n                if (response.headers('notification-response')) {\r\n                    var toastrWrapper = $injector.get('toastrWrapper');\r\n                    toastrWrapper.showNotification(response.data.notificationType, response.data.message);\r\n                }\r\n\r\n                return response;\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('responseErrorInterceptor', ['$q', '$window', '$injector', function ($q, $window, $injector) {\r\n        return {\r\n            responseError: function (response) {\r\n                var toastrWrapper = $injector.get('toastrWrapper');\r\n\r\n                if (response.status === 401) {\r\n                    $window.location.reload();\r\n                }\r\n                else if (response.status === 403) {\r\n                    toastrWrapper.showTranslatedError('common.accessForbidden');\r\n                }\r\n                else if (response.status === 404) {\r\n                    toastrWrapper.showTranslatedError('common.notFoundProblem', { url: response.config.url });\r\n                }\r\n                else if (!response.data || !response.data.message === undefined) {\r\n                    toastrWrapper.showTranslatedError('common.serverResponseProblem');\r\n                }\r\n                else if (response.data.validationData) {\r\n                    toastrWrapper.showValidationError('common.anErrorOccuredWhileSaving', response.data.validationData);\r\n                }\r\n                else {\r\n                    toastrWrapper.showError(response.data.message);\r\n                }\r\n\r\n                return $q.reject(response);\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .factory('progressIndicatorInterceptor', ['$injector', '$q', function ($injector, $q) {\r\n        return {\r\n            request: function (config) {\r\n                config.progressActionId = $injector.get('progressIndicatorService').start();\r\n                return config;\r\n            },\r\n            response: function (response) {\r\n                $injector.get('progressIndicatorService').stop(response.config.progressActionId);\r\n                return response;\r\n            },\r\n            responseError: function (response) {\r\n                $injector.get('progressIndicatorService').stop(response.config.progressActionId);\r\n                return $q.reject(response);\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcCommon')\r\n    .filter('formattedDate', ['GlobalConfiguration', function (GlobalConfiguration) {\r\n        return function (inputValue) {\r\n            return inputValue ? moment(inputValue).format(GlobalConfiguration.dateFormat) : '';\r\n        };\r\n    }]);\r\n\nangular\r\n    .module('sfcCommon')\r\n    .filter('formattedDateTime', ['GlobalConfiguration', function (GlobalConfiguration) {\r\n        return function (inputValue) {\r\n            return inputValue ? moment(inputValue).format(GlobalConfiguration.dateTimeFormat) : '';\r\n        };\r\n    }]);\r\n\nangular\r\n    .module('sfcCommon')\r\n    .filter('hasPermission', ['permissionService', function (permissionService) {\r\n        return function (permissionName) {\r\n            var hasPermission = permissionService.hasPermission(permissionName);\r\n            return hasPermission;\r\n        }\r\n    }]);\nangular\r\n    .module('sfcConfirmation', ['ui.bootstrap', 'pascalprecht.translate']);\nangular\r\n    .module('sfcConfirmation')\r\n    .factory('confirmationService', ['$uibModal', '$translate', function ($uibModal, $translate) {\r\n\r\n        function showConfirmationModal(confirmationMessage, warningMessage) {\r\n            return $uibModal.open({\r\n                component: 'confirmationModalComponent',\r\n                resolve: {\r\n                    confirmationMessage: function () {\r\n                        return confirmationMessage;\r\n                    },\r\n                    warningMessage: function () {\r\n                        return warningMessage;\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            showConfirmation: function (confirmationMessage) {\r\n                return showConfirmationModal(confirmationMessage);\r\n            },\r\n\r\n            showConfirmationWithWarning: function(confirmationMessage, warningMessage) {\r\n                return showConfirmationModal(confirmationMessage, warningMessage);\r\n            },\r\n\r\n            showTranslatedConfirmation: function (confirmationMessageKey) {\r\n                return showConfirmationModal($translate(confirmationMessageKey));\r\n            }\r\n        }\r\n    }]);\nangular\r\n    .module('sfcConfirmation')\r\n    .component('confirmationModalComponent', {\r\n        templateUrl: '/Content/Scripts/Confirmation/templates/confirmationModalComponent.template.html',\r\n        bindings: {\r\n            resolve: '<',\r\n            close: '&',\r\n            dismiss: '&'\r\n        },\r\n        controller: function () {\r\n            var $ctrl = this;\r\n\r\n            $ctrl.$onInit = function () {\r\n                $ctrl.confirmationMessage = $ctrl.resolve.confirmationMessage;\r\n                $ctrl.warningMessage = $ctrl.resolve.warningMessage;\r\n            }\r\n        }\r\n    });\nangular\r\n    .module('sfcDataTables', ['datatables', 'datatables.bootstrap', 'toastr']);\r\n\nangular\r\n    .module('sfcDataTables')\r\n    .factory('genericDataTableAjaxProvider', ['$http', 'toastrWrapper', function ($http, toastrWrapper) {\r\n        var errorCallback = function (callback) {\r\n            callback({ recordsTotal: 0, recordsFilterd: 0, data: [] });\r\n        };\r\n\r\n        return function (url) {\r\n            return function (data, callback, settings) {\r\n                $http.post(url, data)\r\n                     .then(function (response) {\r\n                         if (response.data.error) {\r\n                             errorCallback(callback);\r\n                             toastrWrapper.showError(response.data.error);\r\n                         } else {\r\n                             callback(response.data);\r\n                         }\r\n                     }, function () {\r\n                         errorCallback(callback);\r\n                     });\r\n            };\r\n        }\r\n    }]);\nangular\r\n    .module('sfcDataTables')\r\n    .factory('dataTableHelper', function () {\r\n\r\n        function toggleAll() {\r\n            var that = this;\r\n\r\n            _.each(_.keys(this.selected), function (id) {\r\n                that.selected[id] = that.selectAll;\r\n            });\r\n        }\r\n\r\n        function toggleOne(id) {\r\n            this.selected[id] = !this.selected[id];\r\n            this.checkIfAllSelected();\r\n        }\r\n\r\n        function checkIfAllSelected() {\r\n            this.selectAll = this.allRowSelected();\r\n        }\r\n\r\n        function isAnyRowSelected() {\r\n            return _.some(_.values(this.selected));\r\n        }\r\n\r\n        function allRowSelected() {\r\n            return _.all(_.values(this.selected));\r\n        }\r\n\r\n        function onlyOneSelected() {\r\n            var selectedItems = this.getSelectedItemIds();\r\n            return selectedItems.length === 1;\r\n        }\r\n\r\n        function getSelectedItemIds() {\r\n            var that = this;\r\n            var selectedItemIds = [];\r\n\r\n            _.each(_.keys(this.selected), function (id) {\r\n                if (that.selected[id] === true) {\r\n                    selectedItemIds.push(id);\r\n                }\r\n            });\r\n\r\n            return selectedItemIds;\r\n        }\r\n\r\n        function unselectAll() {\r\n            this.selectAll = false;\r\n            this.toggleAll();\r\n        }\r\n\r\n        function clear() {\r\n            this.selected = {};\r\n            this.selectAll = false;\r\n            this.toggleAll();\r\n        }\r\n\r\n        function prepareModelForTable() {\r\n            return {\r\n                selected: {},\r\n                selectAll: false,\r\n                toggleAll: toggleAll,\r\n                toggleOne: _.throttle(toggleOne, 300),\r\n                checkIfAllSelected: checkIfAllSelected,\r\n                isAnyRowSelected: isAnyRowSelected,\r\n                allRowSelected: allRowSelected,\r\n                onlyOneSelected: onlyOneSelected,\r\n                getSelectedItemIds: getSelectedItemIds,\r\n                clear: clear\r\n            };\r\n        }\r\n\r\n        return {\r\n            prepareModelForTable: prepareModelForTable\r\n        };\r\n    });\r\n\nangular\r\n    .module('sfcDataTables')\r\n    .factory('datatablesConfigurationService', ['DTDefaultOptions', 'BackendRootUrl', 'CurrentLanguage', function (DTDefaultOptions, BackendRootUrl, CurrentLanguage) {\r\n        return function () {\r\n\r\n            DTDefaultOptions.setLanguage({\r\n                url: BackendRootUrl + 'Content/Vendor/datatables/i18n/' + CurrentLanguage + '.json'\r\n            });\r\n        };\r\n    }]);\nangular\r\n    .module('sfcDataTables')\r\n    .directive('datatablesBindAngularFix', ['$compile', '$timeout', function ($compile, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attr) {\r\n\r\n                var childScope = null;\r\n\r\n                function onPreDraw() {\r\n                    if (childScope !== null) {\r\n                        childScope.$destroy();\r\n                        childScope = null;\r\n                        if (attr.preDrawCallback) {\r\n                            $timeout(function () {\r\n                                scope.$apply(attr.preDrawCallback);\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function onDraw() {\r\n                    childScope = scope.$new();\r\n\r\n                    $compile(element.find('thead'))(childScope);\r\n                    $compile(element.find('tbody'))(childScope);\r\n                }\r\n\r\n                element\r\n                    .on('preDraw.dt', onPreDraw)\r\n                    .on('draw.dt', onDraw);\r\n            }\r\n        }\r\n    }]);\r\n\nangular\r\n    .module('sfcDataTables')\r\n    .directive('datatablesProcessingIndicator', function () {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element) {\r\n                element.on('processing.dt', function (e, settings, processing) {\r\n                    if (processing) {\r\n                        var processingIndicator = angular.element(settings.nTableWrapper).find('.dataTables_processing');\r\n                        processingIndicator.css('color', 'gray')\r\n                        processingIndicator.html('<i class=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>');\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n\nangular\r\n    .module('sfcLayout', []);\r\n\nangular\r\n    .module('sfcLayout')\r\n    .directive('menuToggle', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            transclude: true,\r\n            link: function (scope, element, attrs, ctrl, transclude) {\r\n                var bodyElement = $('body');\r\n                var sidebarMenuElement = $('#sidebarMenu');\r\n\r\n                element.append(transclude());\r\n                element.on('click', function () {\r\n                    if (bodyElement.hasClass('nav-md')) {\r\n                        sidebarMenuElement.find('li.active ul').hide();\r\n                        sidebarMenuElement.find('li.active').addClass('active-sm').removeClass('active');\r\n                    } else {\r\n                        sidebarMenuElement.find('li.active-sm > ul').show();\r\n                        sidebarMenuElement.find('li.active-sm').addClass('active').removeClass('active-sm');\r\n                    }\r\n\r\n                    bodyElement.toggleClass('nav-md nav-sm');\r\n                });\r\n            }\r\n        };\r\n    });\nangular\r\n    .module('sfcLayout')\r\n    .directive('sidebarMenu', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            transclude: true,\r\n            link: function (scope, element, attrs, ctrl, transclude) {\r\n                element.append(transclude());\r\n                element.find('a').on('click', function () {\r\n                    var listItem = $(this).parent();\r\n\r\n                    if (listItem.is('.active')) {\r\n                        listItem.removeClass('active active-sm');\r\n                        listItem.find('ul:first').slideUp();\r\n                    } else {\r\n                        // prevent closing menu if we are on child menu\r\n                        if (!listItem.parent().is('.child_menu')) {\r\n                            element.find('li').removeClass('active active-sm');\r\n                            element.find('li ul').slideUp();\r\n                        }\r\n\r\n                        listItem.addClass('active');\r\n\r\n                        listItem.find('ul:first').slideDown();\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    });"]}