angular.module("dsrWorkers",["ui.router","datatables","datatables.bootstrap","dsrDataTables"]).config(["DefaultModuleStateProvider",function(e){e.initialize({entityName:"Worker",templatesPath:"/Content/DSRToolkit/UserManagement/Workers/templates/",permissionRoot:"Administration/Workers/"})}]),angular.module("dsrWorkers").factory("workersRemoveService",["genericRemoveService",function(e){return{remove:function(r){return e("/Administration/Workers/RemoveWorkers","workers.removeConfirmationMessage").remove(r)}}}]),angular.module("dsrWorkers").controller("AddOrUpdateWorkerController",["$state","$stateParams","$translate","$http","toastrWrapper","workersRemoveService","GlobalConfiguration",function(e,r,o,t,i,n,s){function a(){t.post("/Administration/Workers/GetWorkerEditViewModel/"+(r.id||"")).then(function(e){var r=e.data;r.worker&&(angular.extend(d.model,r.worker),d.subtitle=r.worker.firstName+" "+r.worker.lastName),d.unassignedUsers=r.unassignedUsers})}var d=this;d.isEditMode="edit"===e.current.name,d.isExternalNameEditable=s.isWorkerExternalNameEditable||!1,d.model={},d.save=function(){t.post("/Administration/Workers/AddOrUpdateWorker",d.model).then(function(){i.showTranslatedSuccess("workers.savedSuccessfully"),d.goToListView()})},d.goToListView=function(){e.go("list")},d.remove=function(){n.remove(d.model.id).then(function(){d.goToListView()})},d.isEditMode||o("workers.addNewUser").then(function(e){d.subtitle=e}),a()}]),angular.module("dsrWorkers").controller("PreviewWorkerController",["$state","$stateParams","$http","workersRemoveService",function(e,r,o,t){var i=this;return i.model={},i.goToListView=function(){e.go("list")},i.goToEditView=function(){e.go("edit",{id:i.model.id})},i.remove=function(){t.remove(i.model.id).then(function(){i.goToListView()})},r.id?void o.post("/Administration/Workers/GetWorkerPreviewViewModel/"+r.id).then(function(e){angular.extend(i.model,e.data),i.subtitle=i.model.firstName+" "+i.model.lastName}):void i.goToListView()}]),angular.module("dsrWorkers").controller("WorkerListController",["DTColumnBuilder","$translate","workersRemoveService",function(e,r,o){var t=this;t.options={tableDataUrl:"/Administration/Workers/GetWorkerList",columns:[e.newColumn("firstName").withTitle(r("common.firstName")),e.newColumn("lastName").withTitle(r("common.lastName")),e.newColumn("externalName").withTitle(r("common.externalName"))],permissions:{view:"Administration/Workers/View",edit:"Administration/Workers/Edit",delete:"Administration/Workers/Delete",add:"Administration/Workers/Add"},removeItems:function(e){return o.remove(e)}}}]);
//# sourceMappingURL=dsrToolkit_workers-Js.min.js.map
