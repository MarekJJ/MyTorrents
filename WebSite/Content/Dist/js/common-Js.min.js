angular.module("sfcCommon",["datatables","ui.router","pascalprecht.translate"]).config(["$httpProvider","$translateProvider","toastrConfig","uiSelectConfig","dynamicNumberStrategyProvider","CurrentLanguage","$provide",function(e,t,n,r,o,i,a){e.interceptors.push("progressIndicatorInterceptor"),e.interceptors.push("requestInterceptor"),e.interceptors.push("responseNotificationInterceptor"),e.interceptors.push("responseErrorInterceptor"),t.useStaticFilesLoader({prefix:"/Content/i18n/locale-",suffix:".json"}),t.useSanitizeValueStrategy("escape"),t.addInterpolation("$translateMessageFormatInterpolation"),t.preferredLanguage(i),r.theme="bootstrap",r.resetSearchInput=!0,r.appendToBody=!0,angular.extend(n,{positionClass:"toast-bottom-right"}),o.addStrategy("byte",{numThousand:!1,numInt:3,numFract:0}),o.addStrategy("integer",{numSep:".",numThousand:!1,numInt:10,numFract:0}),o.addStrategy("positive-integer",{numSep:".",numThousand:!1,numInt:10,numFract:0,numNeg:!1}),o.addStrategy("decimal",{numSep:".",numThousand:!1,numInt:8,numFract:10}),o.addStrategy("positive-decimal",{numSep:".",numThousand:!1,numInt:8,numFract:10,numNeg:!1}),o.addStrategy("small-decimal",{numSep:".",numThousand:!1,numInt:5,numFract:2}),o.addStrategy("positive-small-decimal",{numSep:".",numThousand:!1,numInt:5,numFract:2,numNeg:!1}),a.decorator("uibAccordionGroupDirective",["$delegate",function(e){var t=e[0];return t.templateUrl=function(e,t){return t.templateUrl||"/Content/Scripts/Common/templates/_accordionOverrideTemplate.html"},e}])}]).run(["$rootScope","$window","permissionService","datatablesConfigurationService","Permissions",function(e,t,n,r,o){e.$on("$stateChangeStart",function(e,t,r,o,i){_.isString(t.permission)&&!n.hasPermission(t.permission)&&e.preventDefault()}),e.$on("$stateChangeSuccess",function(){t.scrollTo(0,0)}),n.setPermissions(o),r()}]),angular.module("sfcCommon").factory("permissionService",function(){var e=[];return{setPermissions:function(t){e=t},hasPermission:function(t){return _.contains(e,t)}}}),angular.module("sfcCommon").factory("toastrWrapper",["toastr","$translate",function(e,t){function n(e){var t="<ul>";return angular.forEach(e,function(e,n){angular.isArray(e)&&e.length>0&&angular.forEach(e,function(e){t+="<li>"+e+"</li>"})}),t+="</ul>"}return{showNotification:function(t,n){var r="error"!==t?1500:0,o={closeButton:!0,extendedTimeOut:1e3,timeOut:r};e[t](n,o)},showError:function(t){e.error(t,{closeButton:!0,extendedTimeOut:1e3,timeOut:0})},showValidationError:function(r,o){var i=n(o);t(r).then(function(t){e.error(i,t,{closeButton:!0,extendedTimeOut:1e3,timeOut:0,allowHtml:!0})})},showTranslatedNotification:function(e,n,r){var o=this;t(n,r).then(function(t){o.showNotification(e,t)})},showTranslatedWarning:function(e,t){this.showTranslatedNotification("warning",e,t)},showTranslatedError:function(e,t){this.showTranslatedNotification("error",e,t)},showTranslatedSuccess:function(e,t){this.showTranslatedNotification("success",e,t)},showTranslatedInfo:function(e,t){this.showTranslatedNotification("info",e,t)}}}]),angular.module("sfcCommon").factory("imageAttachmentUrlHelper",["BackendRootUrl",function(e){return{getImageUrl:function(t,n){return n?e+t+n:this.getPlaceholderUrl()},getPlaceholderUrl:function(){return e+"Content/Images/no-image-placeholder.png"}}}]),angular.module("sfcCommon").factory("progressIndicatorService",["ngProgressFactory",function(e){function t(){return n++}var n=1,r=e.createInstance();r.setHeight("1px"),r.setColor("#1aa5bb");var o={};return{start:function(){var e=t();return _.isEmpty(o)&&r.start(),o[e]=!0,e},stop:function(e){delete o[e],_.isEmpty(o)&&r.complete()}}}]),angular.module("sfcCommon").factory("genericRemoveService",["$http","$translate","confirmationService",function(e,t,n){return function(r,o){function i(i,a){angular.isNumber(i)&&(i=[i]);var s=t(o,{COUNT:i.length},"messageformat"),l=a?t(a):null,u=l?n.showConfirmationWithWarning(s,l):n.showConfirmation(s);return u.result.then(function(){return e.post(r,{itemIds:i})})}return{remove:function(e){return i(e)},removeWithWarning:function(e,t){return i(e,t)}}}}]),angular.module("sfcCommon").provider("DefaultModuleState",["$stateProvider","$urlRouterProvider",function(e,t){this.initialize=function(n){e.state({name:"list",url:"/",templateUrl:n.templatesPath+"list.html",controller:"List"+n.entityName+"Controller as $ctrl"}),e.state({name:"add",url:"/add",templateUrl:n.templatesPath+"addOrUpdate.html",controller:"AddOrUpdate"+n.entityName+"Controller as $ctrl",permission:n.permissionRoot+"Add"}),e.state({name:"edit",url:"/edit/{id}",templateUrl:n.templatesPath+"addOrUpdate.html",controller:"AddOrUpdate"+n.entityName+"Controller as $ctrl",permission:n.permissionRoot+"Edit",params:{id:""}}),e.state({name:"preview",url:"/preview/{id}",templateUrl:n.templatesPath+"preview.html",controller:"Preview"+n.entityName+"Controller as $ctrl",permission:n.permissionRoot+(n.previewPermission||"View"),params:{id:""}}),t.otherwise("/")},this.$get=function(){return{initialize:this.initialize}}}]),angular.module("sfcCommon").directive("hasPermission",["permissionService",function(e){return{link:function(t,n,r){if(!_.isString(r.hasPermission))throw"hasPermission value must be a string";var o=r.hasPermission.trim(),i="!"===o[0];i&&(o=o.slice(1).trim());var a=e.hasPermission(o);a&&!i||!a&&i?n.show():n.hide()}}}]),angular.module("sfcCommon").directive("readonlyCheckbox",function(){return{template:'<div class="icheckbox_flat-blue disabled"></div>',link:function(e,t,n){var r="true"===n.checked;t.children().toggleClass("checked",r)}}}).directive("icheck",["$timeout","$parse",function(e,t){return{priority:100,restrict:"A",require:"ngModel",link:function(t,n,r,o){e(function(){function i(e){"radio"===r.type?o.$setViewValue(a):o.$setViewValue(e)}var a=r.value;n.iCheck({checkboxClass:r.checkboxClass||"icheckbox_flat-blue",radioClass:r.radioClass||"iradio_flat-blue"}).on("ifChanged",function(n){e(function(){t.$apply(function(){i(n.target.checked)}),t.$apply(r.ngClick)})}),t.$watch(r.ngChecked,function(e){"undefined"==typeof e&&(e=!!o.$viewValue),i(e)},!0),t.$watch(r.ngModel,function(e){n.iCheck("update")},!0),t.$watch(r.ngDisabled,function(e){n.iCheck("update")}),t.$watch(function(){return o.$touched&&o.$invalid},function(e){n.parent().toggleClass("invalid",e)}),t.$on("$destroy",function(){n.iCheck("destroy")})})}}}]),angular.module("sfcCommon").directive("viewHeader",[function(){return{restrict:"E",transclude:!0,templateUrl:"/Content/Scripts/Common/templates/_viewHeaderTemplate.html",scope:{title:"@",subtitle:"@"}}}]),angular.module("sfcCommon").directive("formGroup",[function(){return{restrict:"E",template:' <div class="form-group"><label class="col-sm-3 col-xs-12 control-label">{{ label }}<span ng-if="isRequired" class="required-field-marker">*</span></label><div class="col-sm-8 col-lg-6 col-xs-12"><ng-transclude /></div></div>',transclude:!0,scope:{label:"@",isRequired:"<"}}}]),angular.module("sfcCommon").service("formValidationHelper",function(){function e(t){angular.forEach(t.$error,function(t){angular.forEach(t,function(t){void 0!==t.$submitted?e(t):t.$setTouched()})})}return{markFormAsTouched:e}}).directive("formSubmitOnEnter",["formValidationHelper",function(e){return{scope:{submitAction:"&formSubmitOnEnter",form:"<"},link:function(t,n,r){n.on("keypress",function(n){13===n.which&&(n.preventDefault(),t.$apply(function(){t.form.$invalid?e.markFormAsTouched(t.form):t.submitAction()}))})}}}]).directive("formSubmitButton",["$timeout","formValidationHelper",function(e,t){return{scope:{submitAction:"&formSubmitButton",form:"<"},link:function(n,r,o){r.on("click",function(){e(function(){n.form.$invalid?t.markFormAsTouched(n.form):n.submitAction()})})}}}]),angular.module("sfcCommon").directive("uniqueAsyncValidator",["$q","$http","$state",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(n,r,o,i){i.$asyncValidators.uniqueAsyncValidator=function(r){var i=n.$eval(o.modelId),a=o.uniqueAsyncValidator;return t.post(a,{id:i,value:r}).then(function(t){return t.data===!0?e.resolve():e.reject()})}}}}]).component("defaultListView",{bindings:{title:"@",addButton:"@",editButton:"@",previewButton:"@",removeButton:"@",options:"="},templateUrl:"/Content/Scripts/Common/templates/_defaultListViewTemplate.html",controller:["DTOptionsBuilder","DTColumnBuilder","$state","genericDataTableAjaxProvider","dataTableHelper","permissionService",function(e,t,n,r,o,i){function a(e){return t.newColumn(e).withTitle(u).notSortable().withClass("select-checkbox").renderWith(function(t,n,r,o){var i=r[e];return s.table.selected[i]=!1,"<input ng-model=\"$ctrl.table.selected['"+i+'\']" ng-click="$ctrl.table.checkIfAllSelected()" type="checkbox" icheck />'})}var s=this;s.dataTableInstance={},s.table=o.prepareModelForTable();var l=s.options.modelId||"id",u='<input ng-model="$ctrl.table.selectAll" ng-click="$ctrl.table.toggleAll()" type="checkbox" icheck  />';s.dtOptions=e.newOptions().withOption("ajax",r(s.options.tableDataUrl)).withDataProp("data").withOption("paging",!0).withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,t,n){angular.element(e).attr("ng-class",'{"selected" : $ctrl.table.selected[\''+t[l]+"']}"),angular.element(e).attr("ng-click","$ctrl.table.toggleOne('"+t[l]+"')"),angular.element(e).attr("ng-dblclick","$ctrl.goToDetails('"+t[l]+"')")}).withPaginationType("full_numbers").withBootstrap(),s.options.columns.splice(0,0,a(l)),s.dtColumns=s.options.columns,s.goToAddItemView=function(){n.go("add")},s.goToPreviewView=function(e){var t=e||s.table.getSelectedItemIds()[0];n.go("preview",{id:t})},s.goToEditView=function(e){var t=e||s.table.getSelectedItemIds()[0];n.go("edit",{id:t})},s.goToDetails=function(e){i.hasPermission(s.options.permissions.edit)?s.goToEditView(e):i.hasPermission(s.options.permissions.view)&&s.goToPreviewView(e)},s.removeSelectedItems=function(){var e=s.table.getSelectedItemIds();s.options.removeItems(e).then(function(){s.dataTableInstance.reloadData()})}}]}),angular.module("sfcCommon").directive("uiSelectMultipleFocusFix",function(){return{restrict:"A",require:"uiSelect",link:function(e,t,n,r){var o=r.searchInput;o.on("focus",function(){t.addClass("focus")}),o.on("blur",function(){t.removeClass("focus")}),e.$on("$destroy",function(){o.off("focus"),o.off("blur")})}}}),angular.module("sfcCommon").directive("datePicker",["CurrentLanguage","GlobalConfiguration",function(e,t){return{templateUrl:"/Content/Scripts/Common/templates/_datePickerTemplate.html",require:"^^form",scope:{name:"@",model:"=",field:"@",required:"=",type:"@",disabled:"="},link:function(n,r,o,i){n.formCtrl=i,n.dateFieldOptions={allowInputToggle:!0,locale:e,format:"dateTime"===n.type?t.dateTimeFormat:t.dateFormat},n.show=!0}}}]),angular.module("sfcCommon").directive("durationPicker",["$timeout","$filter","$translate",function(e,t,n){function r(e){this.value=e||0,this.increment=function(){this.value++},this.decrement=function(){this.value>0&&this.value--}}return{templateUrl:"/Content/Scripts/Common/templates/_durationPickerTemplate.html",scope:{durationValue:"="},link:function(n,o,i){var a=o.find("input[type=text]");n.days=new r,n.hours=new r,a.on("focus",function(){n.$apply(function(){n.isOpen=!0,e(function(){o.find(".popover-content input:first").focus()},100)})}),o.find(".input-group-addon").on("click",function(){a.focus()}),n.onKeyUp=function(e,t,n){38===e.keyCode?t.increment():40===e.keyCode&&t.decrement()},n.closeOnTabPress=function(e){9===e.keyCode&&(n.isOpen=!1)},n.hide=function(){n.isOpen=!1};var s=t("durationValue");n.$watchGroup(["days.value","hours.value"],function(e){var t=24*n.days.value+n.hours.value;n.textInputValue=s(t),n.durationValue=t}),n.$watch("durationValue",function(e,t){void 0===e||isNaN(e)||(n.days.value=Math.floor(e/24),n.hours.value=e%24)})}}}]),angular.module("sfcCommon").directive("revalidateOn",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var o=n.revalidateOn;e.$on(o,function(){r.$validate()})}}}]).directive("maxValue",["$parse",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,o){o.$validators.maxValue=function(n){if(_.isNaN(n))return o.$viewValue="",o.$render(),o.$setValidity("required",!1),!0;var i=e(r.maxValue)(t);return n<=i}}}}]).directive("minValue",["$parse",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,o){o.$validators.minValue=function(n){if(_.isNaN(n))return o.$viewValue="",o.$render(),o.$setValidity("required",!1),!0;var i=e(r.minValue)(t);return n>=i}}}}]).directive("greaterThanZero",["$parse",function(e){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$validators.greaterThanZero=function(e){return _.isNaN(e)?(r.$viewValue="",r.$render(),r.$setValidity("required",!1),!0):e>0}}}}]),angular.module("sfcCommon").directive("uniqueAsyncValidator",["$q","$http",function(e,t){return{restrict:"A",require:"ngModel",link:function(n,r,o,i){i.$asyncValidators.uniqueAsyncValidator=function(r){var i=n.$eval(o.modelId),a=o.uniqueAsyncValidator;return t.post(a,{id:i,value:r}).then(function(t){return t.data===!0?e.resolve():e.reject()})}}}}]),angular.module("sfcCommon").directive("uniqueOperationValidator",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$validators.uniqueOperationValidator=function(t){var r=(n.name,e.$eval(n.modelList)),o=_.filter(r,function(r){return r.operation==t&&r.$$hashKey!=e.$eval(n.elementKey)});return 0==o.length}}}}]),angular.module("sfcCommon").directive("uniqueWithParentAsyncValidator",["$q","$http",function(e,t){return{restrict:"A",require:"ngModel",link:function(n,r,o,i){i.$asyncValidators.uniqueWithParentAsyncValidator=function(r){var i=n.$eval(o.modelId),a=n.$eval(o.modelParentId),s=o.uniqueWithParentAsyncValidator;return t.post(s,{id:i,parentId:a,value:r}).then(function(t){return t.data===!0?e.resolve():e.reject()})}}}}]),angular.module("sfcCommon").factory("requestInterceptor",["$templateCache","BackendRootUrl",function(e,t){function n(e){var t=e.indexOf("?")===-1?"?":"&";return e+t+"v="+(new Date).getTime()}return{request:function(r){var o="GET"===r.method&&void 0!==e.get(r.url);if(!o){var i=t+r.url;i=i.replace("//","/"),r.url=n(i)}return r.headers["X-Requested-With"]="XMLHttpRequest",r}}}]),angular.module("sfcCommon").factory("responseNotificationInterceptor",["$injector",function(e){return{response:function(t){if(t.headers("notification-response")){var n=e.get("toastrWrapper");n.showNotification(t.data.notificationType,t.data.message)}return t}}}]),angular.module("sfcCommon").factory("responseErrorInterceptor",["$q","$window","$injector",function(e,t,n){return{responseError:function(r){var o=n.get("toastrWrapper");return 401===r.status?t.location.reload():403===r.status?o.showTranslatedError("common.accessForbidden"):404===r.status?o.showTranslatedError("common.notFoundProblem",{url:r.config.url}):r.data&&void 0!==!r.data.message?r.data.validationData?o.showValidationError("common.anErrorOccuredWhileSaving",r.data.validationData):o.showError(r.data.message):o.showTranslatedError("common.serverResponseProblem"),e.reject(r)}}}]),angular.module("sfcCommon").factory("progressIndicatorInterceptor",["$injector","$q",function(e,t){return{request:function(t){return t.progressActionId=e.get("progressIndicatorService").start(),t},response:function(t){return e.get("progressIndicatorService").stop(t.config.progressActionId),t},responseError:function(n){return e.get("progressIndicatorService").stop(n.config.progressActionId),t.reject(n)}}}]),angular.module("sfcCommon").filter("formattedDate",["GlobalConfiguration",function(e){return function(t){return t?moment(t).format(e.dateFormat):""}}]),angular.module("sfcCommon").filter("formattedDateTime",["GlobalConfiguration",function(e){return function(t){return t?moment(t).format(e.dateTimeFormat):""}}]),angular.module("sfcCommon").filter("hasPermission",["permissionService",function(e){return function(t){var n=e.hasPermission(t);return n}}]),angular.module("sfcConfirmation",["ui.bootstrap","pascalprecht.translate"]),angular.module("sfcConfirmation").factory("confirmationService",["$uibModal","$translate",function(e,t){function n(t,n){return e.open({component:"confirmationModalComponent",resolve:{confirmationMessage:function(){return t},warningMessage:function(){return n}}})}return{showConfirmation:function(e){return n(e)},showConfirmationWithWarning:function(e,t){return n(e,t)},showTranslatedConfirmation:function(e){return n(t(e))}}}]),angular.module("sfcConfirmation").component("confirmationModalComponent",{templateUrl:"/Content/Scripts/Confirmation/templates/confirmationModalComponent.template.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:function(){var e=this;e.$onInit=function(){e.confirmationMessage=e.resolve.confirmationMessage,e.warningMessage=e.resolve.warningMessage}}}),angular.module("sfcDataTables",["datatables","datatables.bootstrap","toastr"]),angular.module("sfcDataTables").factory("genericDataTableAjaxProvider",["$http","toastrWrapper",function(e,t){var n=function(e){e({recordsTotal:0,recordsFilterd:0,data:[]})};return function(r){return function(o,i,a){e.post(r,o).then(function(e){e.data.error?(n(i),t.showError(e.data.error)):i(e.data)},function(){n(i)})}}}]),angular.module("sfcDataTables").factory("dataTableHelper",function(){function e(){var e=this;_.each(_.keys(this.selected),function(t){e.selected[t]=e.selectAll})}function t(e){this.selected[e]=!this.selected[e],this.checkIfAllSelected()}function n(){this.selectAll=this.allRowSelected()}function r(){return _.some(_.values(this.selected))}function o(){return _.all(_.values(this.selected))}function i(){var e=this.getSelectedItemIds();return 1===e.length}function a(){var e=this,t=[];return _.each(_.keys(this.selected),function(n){e.selected[n]===!0&&t.push(n)}),t}function s(){this.selected={},this.selectAll=!1,this.toggleAll()}function l(){return{selected:{},selectAll:!1,toggleAll:e,toggleOne:_.throttle(t,300),checkIfAllSelected:n,isAnyRowSelected:r,allRowSelected:o,onlyOneSelected:i,getSelectedItemIds:a,clear:s}}return{prepareModelForTable:l}}),angular.module("sfcDataTables").factory("datatablesConfigurationService",["DTDefaultOptions","BackendRootUrl","CurrentLanguage",function(e,t,n){return function(){e.setLanguage({url:t+"Content/Vendor/datatables/i18n/"+n+".json"})}}]),angular.module("sfcDataTables").directive("datatablesBindAngularFix",["$compile","$timeout",function(e,t){return{restrict:"A",link:function(n,r,o){function i(){null!==s&&(s.$destroy(),s=null,o.preDrawCallback&&t(function(){n.$apply(o.preDrawCallback)}))}function a(){s=n.$new(),e(r.find("thead"))(s),e(r.find("tbody"))(s)}var s=null;r.on("preDraw.dt",i).on("draw.dt",a)}}}]),angular.module("sfcDataTables").directive("datatablesProcessingIndicator",function(){return{restrict:"A",link:function(e,t){t.on("processing.dt",function(e,t,n){if(n){var r=angular.element(t.nTableWrapper).find(".dataTables_processing");r.css("color","gray"),r.html('<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>')}})}}}),angular.module("sfcLayout",[]),angular.module("sfcLayout").directive("menuToggle",function(){return{restrict:"EA",transclude:!0,link:function(e,t,n,r,o){var i=$("body"),a=$("#sidebarMenu");t.append(o()),t.on("click",function(){i.hasClass("nav-md")?(a.find("li.active ul").hide(),a.find("li.active").addClass("active-sm").removeClass("active")):(a.find("li.active-sm > ul").show(),a.find("li.active-sm").addClass("active").removeClass("active-sm")),i.toggleClass("nav-md nav-sm")})}}}),angular.module("sfcLayout").directive("sidebarMenu",function(){return{restrict:"EA",transclude:!0,link:function(e,t,n,r,o){t.append(o()),t.find("a").on("click",function(){var e=$(this).parent();e.is(".active")?(e.removeClass("active active-sm"),e.find("ul:first").slideUp()):(e.parent().is(".child_menu")||(t.find("li").removeClass("active active-sm"),t.find("li ul").slideUp()),e.addClass("active"),e.find("ul:first").slideDown())})}}});
//# sourceMappingURL=common-Js.min.js.map
