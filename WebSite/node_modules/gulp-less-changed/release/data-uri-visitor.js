"use strict";
var dataUriVisitor;
(function (dataUriVisitor) {
    var DataUriVisitor = (function () {
        function DataUriVisitor(less) {
            this.isReplacing = false;
            this.isPreEvalVisitor = true;
            this._imports = [];
            this._visitor = new less.visitors.Visitor(this);
        }
        DataUriVisitor.prototype.run = function (root) {
            return this._visitor.visit(root);
        };
        DataUriVisitor.prototype.visitCall = function (ruleNode, visitArgs) {
            if (ruleNode.name !== 'data-uri') {
                return ruleNode;
            }
            if (ruleNode.args.length === 0) {
                return ruleNode;
            }
            var argument;
            if (ruleNode.args.length === 2) {
                argument = ruleNode.args[1];
            }
            else {
                argument = ruleNode.args[0];
            }
            var importedFile = argument.value;
            this._imports.push({ directory: ruleNode.currentFileInfo.entryPath, relativePath: importedFile });
            return ruleNode;
        };
        Object.defineProperty(DataUriVisitor.prototype, "imports", {
            get: function () {
                return this._imports;
            },
            enumerable: true,
            configurable: true
        });
        return DataUriVisitor;
    }());
    dataUriVisitor.DataUriVisitor = DataUriVisitor;
})(dataUriVisitor || (dataUriVisitor = {}));
module.exports = dataUriVisitor;

//# sourceMappingURL=data-uri-visitor.js.map
